<div class="max-w-2xl mx-auto px-4 py-8">
  <div class="bg-white rounded-lg shadow-sm p-6">
    <h1 class="text-2xl font-bold mb-6">Confirm Your Appointment</h1>

    <!-- Appointment Details Summary -->
    <div class="bg-gray-50 rounded-lg p-4 mb-6">
      <div class="grid grid-cols-2 gap-4 text-sm">
        <div>
          <span class="text-gray-600">Provider:</span>
          <p class="font-semibold"><%= @provider.full_name %></p>
        </div>
        <div>
          <span class="text-gray-600">Office:</span>
          <p class="font-semibold"><%= @office.name %></p>
        </div>
        <% if @slot_start %>
          <div>
            <span class="text-gray-600">Date & Time:</span>
            <p class="font-semibold">
              <%= @slot_start.strftime("%B %d, %Y at %I:%M %p") %>
            </p>
          </div>
          <% if @slot_end %>
            <div>
              <span class="text-gray-600">Duration:</span>
              <p class="font-semibold">
                <%= ((@slot_end - @slot_start) / 60).to_i %> minutes
              </p>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>

    <!-- Booking Form -->
    <%= form_with model: @appointment, url: bookings_path(@provider.slug, office_id: @office.id), method: :post do |f| %>
      <%= f.hidden_field :scheduled_at, value: @slot_start&.iso8601 %>

      <div class="mb-4">
        <%= f.label :title, "Appointment Title", class: "block text-sm font-medium text-gray-700 mb-2" %>
        <%= f.text_field :title,
            class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
            placeholder: "e.g., Initial consultation",
            required: true %>
      </div>

      <div class="mb-6">
        <%= f.label :description, "Notes (Optional)", class: "block text-sm font-medium text-gray-700 mb-2" %>
        <%= f.text_area :description,
            rows: 4,
            class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
            placeholder: "Any additional information for the provider" %>
      </div>

      <% if @appointment.errors.any? %>
        <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-4">
          <ul class="text-red-800 text-sm list-disc list-inside">
            <% @appointment.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="flex gap-3">
        <%= f.submit "Confirm Booking",
            class: "flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold cursor-pointer transition-colors",
            data: { disable_with: "Booking..." } %>
        <%= link_to "Cancel",
            public_profile_path(@provider.slug, office_id: @office.id),
            class: "px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 text-center" %>
      </div>
    <% end %>

    <p class="text-sm text-gray-600 mt-4 text-center">
      Your appointment will be marked as <strong>pending</strong> until the provider confirms.
    </p>
  </div>
</div>
